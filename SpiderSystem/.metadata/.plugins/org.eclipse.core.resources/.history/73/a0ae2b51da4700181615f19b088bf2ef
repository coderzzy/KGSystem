package org.SpiderSystem.Web.service.spider.saver;

import java.util.Map.Entry;

import javax.annotation.Resource;

import org.SpiderSystem.SpiderFramework.core.saver.Saver;
import org.SpiderSystem.SpiderFramework.model.Page;
import org.SpiderSystem.Web.service.INewsService;

public class SQLSaver implements Saver{
	private static int count = 0;
	@Resource
	private INewsService newsService;

	@Override
	public void save(Page page) {
		// TODO Auto-generated method stub		
		String title = "";
		String content = "";
		String time = "";
		String url = "";
		for(Entry<Object, Object> entry: page.getItems().entrySet()){
			System.out.println(entry.getKey()+":"+entry.getValue());
			String key = (String)entry.getKey();
			switch(key){
			case "title":
				title = (String)entry.getValue();
				break;
			case "content":
				content = (String)entry.getValue();
				break;
			case "time":
				time = (String)entry.getValue();
				break;
			case "url":
				url = (String)entry.getValue();
				break;
				default:
					break;
			}
		}
		if(newsService.addNews(++count, title, content, time, url)){
			// 成功
			System.out.println("success");
		}else{
			System.out.println("error");
		}
		
	}

}
